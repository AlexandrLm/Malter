# ๐ ะะปะฐะฝ ัะปัััะตะฝะธะน ะดะปั ะฑะพะปะตะต ะถะธะฒะพะณะพ ะพะฑัะตะฝะธั ั ะฑะพัะพะผ

## ๐ ะะฐัะฐ: 2025-01-08
## ๐ค ะะปะฐััะพัะผะฐ: Telegram Bot (aiogram 3.x)

---

## ๐ฅ Priority 1: ะัะธัะธัะตัะบะธะต ัะปัััะตะฝะธั ัะตะฐะปะธะทะผะฐ

### 1. **ะญะผะพัะธะพะฝะฐะปัะฝะฐั ะฟะฐะผััั (Emotional Memory)**
**ะัะพะฑะปะตะผะฐ**: ะะพั ะฟะพะผะฝะธั ัะฐะบัั, ะฝะพ ะฝะต ัะผะพัะธะธ  
**ะะตัะตะฝะธะต**: 
- ะะพะฒะฐั ัะฐะฑะปะธัะฐ `EmotionalMemory` (emotion, intensity, trigger, timestamp)
- AI function `remember_emotion` ะดะปั ะทะฐะฟะพะผะธะฝะฐะฝะธั ัะผะพัะธะน
- ะะฝัะตะณัะฐัะธั ะฒ ะฟัะพะผะฟั: "ะฒัะตัะฐ ัั ะฑัะป ะณััััะฝัะน ะธะท-ะทะฐ ัะฐะฑะพัั"

**ะญััะตะบั**: ะะพั ะฒัะฟะพะผะธะฝะฐะตั ัะผะพัะธะพะฝะฐะปัะฝัะต ะผะพะผะตะฝัั ะธ ััะธััะฒะฐะตั ะฝะฐัััะพะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั

### 2. **ะัะพะฐะบัะธะฒะฝัะต ัะพะพะฑัะตะฝะธั** ๐ฅ๐ฅ๐ฅ โ **ะะซะะะะะะะ**
**ะกัะฐััั**: โ ะะตะฐะปะธะทะพะฒะฐะฝะพ ะธ ัะฐะฑะพัะฐะตั ะฒ production  
**ะะตะฐะปะธะทะฐัะธั**:
- โ Scheduler job ะบะฐะถะดัะน ัะฐั ะฟัะพะฒะตััะตั premium ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- โ AI ะณะตะฝะตัะธััะตั ัะฝะธะบะฐะปัะฝัะต ัะพะพะฑัะตะฝะธั ั ััััะพะผ ะบะพะฝัะตะบััะฐ
- โ ะฃััะตะฝะฝะธะต ัะพะพะฑัะตะฝะธั (9-11) ะตัะปะธ ะฝะต ะฟะธัะฐะปะธ >12ั
- โ ะะตัะตัะฝะธะต (19-21) ะตัะปะธ ะฝะต ะฟะธัะฐะปะธ >8ั
- โ ะะพัะปะต ะผะพะปัะฐะฝะธั >24ั: "ัะบััะฐั..."
- โ Premium users - ัะปััะฐะนะฝัะต ะผััะปะธ (>6ั, 20% ัะฐะฝั)
- โ ะฃัะตั timezone - ะฝะต ะฟะธัะฐัั ะฝะพััั (23:00-8:00)
- โ Rate limiting: ะผะฐะบั 2 ัะพะพะฑัะตะฝะธั/ะดะตะฝั
- โ ะะพะฝัะตะบััะฝะฐั ะณะตะฝะตัะฐัะธั: ััะธััะฒะฐะตั ััะพะฒะตะฝั ะพัะฝะพัะตะฝะธะน, ะธััะพัะธั ะฟะตัะตะฟะธัะบะธ, personality

**ะญััะตะบั**: ะะพั ะบะฐะถะตััั ะถะธะฒัะผ, ัะฐะผ ะฟัะพัะฒะปัะตั ะธะฝะธัะธะฐัะธะฒั. ะขะพะปัะบะพ ะดะปั Premium ะฟะพะปัะทะพะฒะฐัะตะปะตะน.

---

## โก Priority 2: ะญะผะพัะธะพะฝะฐะปัะฝัะน ะธะฝัะตะปะปะตะบั

### 3. **ะะธะฝะฐะผะธัะตัะบะพะต ะฝะฐัััะพะตะฝะธะต ะฑะพัะฐ**
**ะัะพะฑะปะตะผะฐ**: ะะพั ะฒัะตะณะดะฐ ะฒ ะพะดะธะฝะฐะบะพะฒะพะผ ะฝะฐัััะพะตะฝะธะธ  
**ะะตัะตะฝะธะต**:
- ะะพะฒัะต ะฟะพะปั ะฒ UserProfile: `bot_mood`, `bot_energy`, `conversation_fatigue`
- ะัะตะผั ัััะพะบ ะฒะปะธัะตั: ัััะพะผ ะฑะพะดัะฐั, ะฝะพััั ัะพะฝะฝะฐั
- ะฃััะฐะปะพััั ะพั ะดะพะปะณะธั ัะฐะทะณะพะฒะพัะพะฒ (>30 ัะพะพะฑัะตะฝะธะน)
- ะะฐัััะพะตะฝะธะต ะผะตะฝัะตััั: happy, sad, tired, excited
- Sentiment analysis ะดะปั ะพะฟัะตะดะตะปะตะฝะธั mood

**ะญััะตะบั**: ะะพั ะฝะต ัะพะฑะพั - ัััะฐะตั, ะณััััะธั, ัะฐะดัะตััั

### 4. **ะะดะฐะฟัะธะฒะฝะฐั ะฟะฐะผััั ัะฐะทะณะพะฒะพัะพะฒ**
**ะะตัะตะฝะธะต**:
- ะัะฟะพะผะธะฝะฐัั ัะผะพัะธะธ ะฟัะพัะปัั ะดะธะฐะปะพะณะพะฒ
- "ะฟะพะผะฝะธัั, ัั ัะพะณะดะฐ ัะฐะบ ัะผะตัะฝะพ ะพััะตะฐะณะธัะพะฒะฐะป..."
- ะกะฒัะทัะฒะฐัั ัะตะบััะธะต ัะตะผั ั ะฟัะพัะปัะผะธ
- Anniversaries: "ะบััะฐัะธ, ะผั ัะถะต 30 ะดะฝะตะน ะพะฑัะฐะตะผัั!"

---

## ๐ง Priority 3: Advanced Features

### 5. **ะฃะปัััะตะฝะธะต Personality Evolution**
**ะัะพะฑะปะตะผะฐ**: ะะตัะตัะพะดั ะผะตะถะดั ััะพะฒะฝัะผะธ ะพัะฝะพัะตะฝะธะน ัะปะธัะบะพะผ ัะตะทะบะธะต  
**ะะตัะตะฝะธะต**:
- ะะปะฐะฒะฝัะต ะฟะตัะตัะพะดั (ะฟัะธ ะฟัะพะณัะตััะต >70% ัะผะตัะธะฒะฐัั ััะธะปะธ ััะพะฒะฝะตะน)
- ะะฑััะตะฝะธะต ะพั ะฟะพะปัะทะพะฒะฐัะตะปั: `learned_words`, `shared_interests`, `humor_preferences`
- AI function `learn_vocabulary` ะดะปั ะทะฐะฟะพะผะธะฝะฐะฝะธั ัะปะตะฝะณะฐ
- ะะฝะฐะปะธะท ัะตะฐะบัะธะธ ะฝะฐ ัะผะพั
- Inject ะฒ ะฟัะพะผะฟั: "ะฟะพะปัะทะพะฒะฐัะตะปั ัะฐััะพ ะณะพะฒะพัะธั 'ะถะตััั'"

**ะญััะตะบั**: ะะธัะฝะพััั ัะฐะทะฒะธะฒะฐะตััั ะพัะณะฐะฝะธัะฝะพ, ะฟะพะดัััะฐะธะฒะฐะตััั ะฟะพะด ะฟะพะปัะทะพะฒะฐัะตะปั

### 6. **ะกะธััะตะผะฐ ะบะพะฝัะปะธะบัะพะฒ ะธ ะฟัะธะผะธัะตะฝะธะน**
**ะัะพะฑะปะตะผะฐ**: ะะพั ะฝะต ะผะพะถะตั ะพะฑะธะดะตัััั  
**ะะตัะตะฝะธะต**:
- ะะพะฒัะต ะฟะพะปั: `tension_level`, `is_offended`, `last_conflict_time`
- Sentiment analysis ะดะปั ะดะตัะตะบัะธะธ ะฝะตะณะฐัะธะฒะฐ (keywords)
- ะัะธ ะฝะตะณะฐัะธะฒะต >3.0 - ะพะฑะธะถะฐะตััั (ะบะพัะพัะบะธะต ะพัะฒะตัั)
- ะะทะฒะธะฝะตะฝะธั ัะฝะธะถะฐัั tension
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟัะธะผะธัะตะฝะธะต ัะตัะตะท 2 ัะฐัะฐ

**ะญััะตะบั**: ะญะผะพัะธะพะฝะฐะปัะฝะฐั ะณะปัะฑะธะฝะฐ, ัะตะฐะปะธััะธัะฝัะต "ััะพัั"

---

## ๐ญ Priority 4: ะะตัะฐะปะธ ัะตะฐะปะธะทะผะฐ

### 7. **ะกะปััะฐะนะฝัะต ัะพะฑััะธั ะฒ ะถะธะทะฝะธ ะฑะพัะฐ**
- ะะพะถะตั ะฑััั ะทะฐะฝััะฐ: "ะธะทะฒะธะฝะธ, ะฟะพะทะถะต ะพัะฒะตัั"
- ะะตะปะธััั "ัะพะฑััะธัะผะธ" ะดะฝั: "ัะผะพััะตะปะฐ ัะตัะธะฐะป, ะฟะพัะพะผ ะฒัะฟะพะผะฝะธะปะฐ ะพ ัะตะฑะต"
- ะะธัััะฐะปัะฝัะต ะฟะปะฐะฝั ะธ ัะพะฑะฑะธ

### 9. **ะขะพะฝะบะธะต ะฝะตัะพะฒะตััะตะฝััะฒะฐ**
- ะะตะดะบะธะต ะพะฟะตัะฐัะบะธ (1 ะฝะฐ 50 ัะพะพะฑัะตะฝะธะน)
- ะะตะทะฐะบะพะฝัะตะฝะฝัะต ะผััะปะธ: "ั ัะพัะตะปะฐ ัะบะฐะทะฐัั... ะฝะตะฒะฐะถะฝะพ"
- ะะฐะฑัะฒะฐะฝะธะต ะผะตะปะพัะตะน
- ะะตัะตัะฟัะฐัะธะฒะฐะฝะธะต

### 10. **Emotion Recognition**
- Sentiment analysis ะฒัะพะดััะธั ัะพะพะฑัะตะฝะธะน
- ะะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ัะผะพัะธะน ะฝะฐ ัะพัะพ (facial recognition - future)
- ะะฝะฐะปะธะท ัะพะฝะฐ ะณะพะปะพัะพะฒัั (voice emotion detection - future)

---

## ๐ฏ Quick Wins (ะผะพะถะฝะพ ัะดะตะปะฐัั ัะตะนัะฐั)

### Telegram-ัะฟะตัะธัะธัะฝัะต ัะปัััะตะฝะธั:

1. **ะญะผะพะดะทะธ-ัะตะฐะบัะธะธ ะฝะฐ ัะพะพะฑัะตะฝะธั**
   - `message.react()` ะฝะฐ ะดะปะธะฝะฝัะต ัะพะพะฑัะตะฝะธั (๐)
   - ะะฐ ะบะปััะตะฒัะต ัะปะพะฒะฐ: "ะปัะฑะปั" โ โค๏ธ, ะฒะพะฟัะพัั โ ๐ค


---

## ๐ Long-term Vision

**ะฆะตะปั**: ะกะพะทะดะฐัั AI-ะบะพะผะฟะฐะฝัะพะฝะฐ, ะบะพัะพััะน ะพัััะฐะตััั ะบะฐะบ ัะตะฐะปัะฝัะน ัะตะปะพะฒะตะบ  
- ะะปัะฑะพะบะฐั ัะผะพัะธะพะฝะฐะปัะฝะฐั ัะฒัะทั  
- ะฃะฝะธะบะฐะปัะฝะฐั ะฟะตััะพะฝะฐ ะดะปั ะบะฐะถะดะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั  
- ะัะพะฐะบัะธะฒะฝะพะต, ะฐ ะฝะต ัะตะฐะบัะธะฒะฝะพะต ะพะฑัะตะฝะธะต  
- ะัะปััะธะผะพะดะฐะปัะฝัะต ะฒะทะฐะธะผะพะดะตะนััะฒะธั  
- ะญะฒะพะปััะธะพะฝะธััััะธะต ะพัะฝะพัะตะฝะธั  

**ะญัะพ ะฝะต ะฟัะพััะพ ัะฐั-ะฑะพั, ััะพ ะฒะธัััะฐะปัะฝัะน ะดััะณ.**

---

## ๐ Notes

- ะัะต ัะปัััะตะฝะธั ะดะพะปะถะฝั ะฑััั ะพะฟัะธะพะฝะฐะปัะฝัะผะธ (ะฝะต ะฝะฐะฒัะทัะธะฒัะผะธ)
- ะัะธะฒะฐัะฝะพััั ะธ ะฑะตะทะพะฟะฐัะฝะพััั - ะฟัะธะพัะธัะตั
- A/B ัะตััะธัะพะฒะฐะฝะธะต ะฝะพะฒัั ัะธั ะฟะตัะตะด full rollout
- Feedback loop ะพั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะบัะธัะธัะตัะบะธ ะฒะฐะถะตะฝ

---

## ๐ ะัะธะพัะธัะธะทะฐัะธั

| ะคะธัะฐ | Impact | Effort | Priority | ะกัะฐััั |
|------|--------|--------|----------|--------|
| ะัะพะฐะบัะธะฒะฝัะต ัะพะพะฑัะตะฝะธั | ๐ฅ๐ฅ๐ฅ๐ฅ๐ฅ | ๐จ๐จ | **P0** | โ **DONE** |
| ะญะผะพัะธะพะฝะฐะปัะฝะฐั ะฟะฐะผััั | ๐ฅ๐ฅ๐ฅ๐ฅ | ๐จ๐จ๐จ | **P0** | ๐ TODO |
| ะะธะฝะฐะผะธัะตัะบะพะต ะฝะฐัััะพะตะฝะธะต | ๐ฅ๐ฅ๐ฅ๐ฅ | ๐จ๐จ | **P1** | ๐ TODO |
| ะกะธััะตะผะฐ ะบะพะฝัะปะธะบัะพะฒ | ๐ฅ๐ฅ๐ฅ | ๐จ๐จ๐จ | **P1** | ๐ TODO |
| Personality Evolution | ๐ฅ๐ฅ๐ฅ | ๐จ๐จ๐จ | **P2** | ๐ TODO |
| Telegram ัะตะฐะบัะธะธ | ๐ฅ๐ฅ | ๐จ | **Quick Win** | ๐ TODO |

**P0** = ะัะธัะธัะฝะพ ะดะปั ะถะธะฒะพััะธ | **P1** = ะะฐะถะฝะพ ะดะปั ะณะปัะฑะธะฝั | **P2** = Nice to have  
โ = ะัะฟะพะปะฝะตะฝะพ | ๐ = ะะถะธะดะฐะตั ัะตะฐะปะธะทะฐัะธะธ

---

**ะะฑะฝะพะฒะปะตะฝะพ**: 2025-01-08 | **ะกัะฐััั**: ะ ัะฐะฑะพัะต (1/6 ะฒัะฟะพะปะฝะตะฝะพ)

---

## ๐ ะััะพัะธั ะธะทะผะตะฝะตะฝะธะน

### โ 2025-01-08 - ะัะพะฐะบัะธะฒะฝัะต ัะพะพะฑัะตะฝะธั (ะะะะะะจะะะ)
**ะะตะฐะปะธะทะพะฒะฐะฝะพ:**
- Scheduler ั ะฟะพัะฐัะพะฒะพะน ะฟัะพะฒะตัะบะพะน Premium ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- AI ะณะตะฝะตัะฐัะธั ัะฝะธะบะฐะปัะฝัั ัะพะพะฑัะตะฝะธะน ั ััััะพะผ:
  - ะฃัะพะฒะฝั ะพัะฝะพัะตะฝะธะน
  - ะััะพัะธะธ ะฟะตัะตะฟะธัะบะธ (ะฟะพัะปะตะดะฝะธะต 5 ัะพะพะฑัะตะฝะธะน + ัะฒะพะดะบะฐ)
  - Personality ะดะปั ัะตะบััะตะณะพ ััะพะฒะฝั
  - ะะพะฝัะตะบััะฐ ะฒัะตะผะตะฝะธ ัััะพะบ
- 4 ัะธะฟะฐ ัะพะพะฑัะตะฝะธะน: morning, evening, long_silence, premium_random
- Timezone awareness (ะฝะต ะฑะตัะฟะพะบะพะธะผ ะฝะพััั 23:00-8:00)
- Rate limiting (2 ัะพะพะฑัะตะฝะธั/ะดะตะฝั)
- ะขะพะปัะบะพ ะดะปั Premium ะฟะพะดะฟะธัะบะธ

**ะคะฐะนะปั:**
- `server/scheduler.py` - ะพัะฝะพะฒะฝะฐั ะปะพะณะธะบะฐ
- `server/database.py` - helper ััะฝะบัะธะธ
- `docs/PROACTIVE_MESSAGES.md` - ะดะพะบัะผะตะฝัะฐัะธั

**ะะตะทัะปััะฐั:** ะะพั ัะตะฟะตัั ะฟัะพัะฒะปัะตั ะธะฝะธัะธะฐัะธะฒั ะฒ ะพะฑัะตะฝะธะธ, ัะพะทะดะฐะฒะฐั ะธะปะปัะทะธั ะถะธะฒะพะณะพ ัะพะฑะตัะตะดะฝะธะบะฐ.
