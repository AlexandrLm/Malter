# ü§ñ EvolveAI - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π Telegram –ë–æ—Ç

> –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π conversational AI –±–æ—Ç —Å —Å–∏—Å—Ç–µ–º–æ–π —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É—é—â–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π, –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç—å—é –∏ –ø—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–æ–π

[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.116+-green.svg)](https://fastapi.tiangolo.com/)
[![Docker](https://img.shields.io/badge/Docker-Ready-blue.svg)](https://www.docker.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#-–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- [–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–æ—Å–Ω–æ–≤–Ω—ã–µ-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API](#-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-api)
- [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å](#-–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞](#-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)
- [–õ–∏—Ü–µ–Ω–∑–∏—è](#-–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

**EvolveAI** - —ç—Ç–æ enterprise-grade conversational AI —Å–∏—Å—Ç–µ–º–∞, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –±–∞–∑–µ Google Gemini AI, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–ø—ã—Ç –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞.

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- üß† **–≠–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É—é—â–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è** - —Å–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –æ—Ç–Ω–æ—à–µ–Ω–∏–π –æ—Ç "–ù–µ–∑–Ω–∞–∫–æ–º–µ—Ü" –¥–æ "Intimate"
- üíæ **–î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ñ–∞–∫—Ç–æ–≤ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- üîä **–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –≥–æ–ª–æ—Å–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (TTS)
- üí≥ **–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞** - —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏
- üìä **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** - –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üîê **Enterprise –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, rate limiting
- üìà **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≤—ã—Å–æ–∫–∏–º –Ω–∞–≥—Ä—É–∑–∫–∞–º

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   TELEGRAM BOT                       ‚îÇ
‚îÇ          (aiogram + async processing)                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ JWT Auth + HTTP
                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              FASTAPI REST API                        ‚îÇ
‚îÇ   (Gunicorn + Uvicorn Workers + Middleware)         ‚îÇ
‚îÇ                                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  Chat        ‚îÇ  Analytics   ‚îÇ  Admin          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  Endpoints   ‚îÇ  Endpoints   ‚îÇ  Endpoints      ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ               ‚îÇ
           ‚ñº               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PostgreSQL     ‚îÇ  ‚îÇ   Redis Cache    ‚îÇ
‚îÇ   (Primary DB)   ‚îÇ  ‚îÇ  (Circuit Breaker)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Google Gemini AI              ‚îÇ
‚îÇ  (Text Generation + TTS + Vision)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

#### 1. **Bot Service** (`bot/`)
- Telegram Bot –Ω–∞ –±–∞–∑–µ aiogram 3.x
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å payment API
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ –∫–æ–ª–±—ç–∫–æ–≤

#### 2. **API Service** (`main.py` + `server/`)
- FastAPI REST API —Å OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- Rate limiting (SlowAPI)
- Prometheus –º–µ—Ç—Ä–∏–∫–∏
- Health checks (liveness/readiness)

#### 3. **Database Layer** (`server/database.py` + `server/models.py`)
- PostgreSQL —Å asyncpg
- SQLAlchemy ORM
- Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### 4. **AI Engine** (`server/ai.py`)
- Google Gemini integration
- Context management
- Image analysis support
- Circuit Breaker –ø–∞—Ç—Ç–µ—Ä–Ω

#### 5. **Utils** (`utils/`)
- **Circuit Breaker** - –∑–∞—â–∏—Ç–∞ –æ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–±–æ–µ–≤
- **Cache** - Redis –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å fallback
- **Encryption** - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (Fernet)
- **DB Monitoring** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ slow queries

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

| –§—É–Ω–∫—Ü–∏—è | Free | Premium |
|---------|------|---------|
| –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è | 50/–¥–µ–Ω—å | –ë–µ–∑–ª–∏–º–∏—Ç |
| –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ | 10 —Å–æ–æ–±—â–µ–Ω–∏–π | –ü–æ–ª–Ω–∞—è |
| –ì–æ–ª–æ—Å–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã | ‚ùå | ‚úÖ |
| –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | ‚ùå | ‚úÖ |
| –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å | –ë–∞–∑–æ–≤–∞—è | –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è |
| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ | ‚ùå | ‚úÖ |

### –°–∏—Å—Ç–µ–º–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π:

1. **–ù–µ–∑–Ω–∞–∫–æ–º–µ—Ü** (0-99 –æ—á–∫–æ–≤) - –ø–µ—Ä–≤–æ–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ
2. **–ó–Ω–∞–∫–æ–º—ã–π** (100-299) - –Ω–∞–ª–∞–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
3. **–î—Ä—É–≥** (300-599) - –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ
4. **–ë–ª–∏–∑–∫–∏–π –¥—Ä—É–≥** (600-999) - –≥–ª—É–±–æ–∫–∞—è —Å–≤—è–∑—å
5. **Intimate** (1000+) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–ª–∏–∑–æ—Å—Ç—å

### AI Capabilities:

- üß© **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ** - —É—á–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –¥–æ 10+ —Å–æ–æ–±—â–µ–Ω–∏–π
- üìù **–°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤–æ–¥–æ–∫ –¥–∏–∞–ª–æ–≥–∞
- üé≠ **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–æ–Ω–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π
- üñºÔ∏è **–ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å** - –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Ç–µ–∫—Å—Ç–∞
- üó£Ô∏è **TTS –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- üß† **–ü–∞–º—è—Ç—å —Ñ–∞–∫—Ç–æ–≤** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤—ã–∑–æ–≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend:
- **Python 3.11+** - –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **FastAPI 0.116** - REST API framework
- **aiogram 3.21** - Telegram Bot framework
- **SQLAlchemy 2.0** - ORM
- **asyncpg** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π PostgreSQL –¥—Ä–∞–π–≤–µ—Ä
- **Alembic** - database migrations

### AI & ML:
- **Google Gemini API** - LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞
- **Gemini Vision** - –∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **Gemini TTS** - text-to-speech

### Infrastructure:
- **PostgreSQL 15.7** - primary database
- **Redis 7.2** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ circuit breaker
- **Docker & Docker Compose** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Gunicorn + Uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä

### Monitoring & Observability:
- **Prometheus** - –º–µ—Ç—Ä–∏–∫–∏
- **starlette-prometheus** - FastAPI middleware
- **Custom DB monitoring** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ slow queries
- **Health checks** - liveness/readiness probes

### Security:
- **python-jose** - JWT —Ç–æ–∫–µ–Ω—ã
- **passlib + bcrypt** - —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **cryptography** - —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (Fernet)
- **SlowAPI** - rate limiting

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- Docker 20.10+
- Docker Compose 2.0+
- Git

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/yourusername/evolveai.git
cd evolveai

# 2. –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
cp .env.example .env

# 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
nano .env  # –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
# - TELEGRAM_BOT_TOKEN (–æ—Ç @BotFather)
# - GOOGLE_API_KEY (–æ—Ç Google AI Studio)
# - POSTGRES_PASSWORD (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä–æ–ª—å)
# - JWT_SECRET (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è: openssl rand -hex 32)
# - ENCRYPTION_KEY (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")

# 4. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps
docker-compose logs -f
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:

```bash
# Health check API
curl http://localhost:8000/health

# Ready check (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
curl http://localhost:8000/ready

# API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
open http://localhost:8000/docs

# Prometheus –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:8000/metrics
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env):

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:

```env
# Telegram
TELEGRAM_BOT_TOKEN="1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"

# Google AI
GOOGLE_API_KEY="AIza..."

# Database
POSTGRES_USER=myuser
POSTGRES_PASSWORD=super_secure_password_here
POSTGRES_DB=malterdb
DB_HOST=db

# Security (–ö–†–ò–¢–ò–ß–ù–û!)
JWT_SECRET=your-super-secret-jwt-key-min-32-chars
ENCRYPTION_KEY=your-fernet-encryption-key-here
```

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:

```env
# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
CACHE_TTL_SECONDS=600

# Payments (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
PAYMENT_PROVIDER_TOKEN="your_payment_token"

# Logging
LOG_LEVEL=INFO

# HTTPX
HTTPX_TIMEOUT=180
HTTPX_CONNECT_TIMEOUT=10

# AI Settings
MAX_AI_ITERATIONS=3
AI_THINKING_BUDGET=0
MAX_IMAGE_SIZE_MB=10
```

### Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 5 —Å–µ—Ä–≤–∏—Å–æ–≤:

1. **api** - FastAPI REST API (4 Gunicorn workers)
2. **bot** - Telegram Bot (aiogram)
3. **db** - PostgreSQL 15.7
4. **redis** - Redis 7.2
5. **migration** - Alembic –º–∏–≥—Ä–∞—Ü–∏–∏ (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π)

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs -f api
docker-compose logs -f bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
docker-compose restart api

# –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ API workers
docker-compose up -d --scale api=2

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º volumes (–û–ü–ê–°–ù–û: —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ!)
docker-compose down -v
```

---

## üì° –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

### Authentication:

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ:

```bash
Authorization: Bearer <jwt_token>
```

–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:

```bash
POST /auth
Content-Type: application/json

{
  "user_id": 123456789
}

# Response:
{
  "access_token": "eyJ...",
  "token_type": "bearer"
}
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

#### Chat:

```bash
# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
POST /chat
Authorization: Bearer <token>
Content-Type: application/json

{
  "message": "–ü—Ä–∏–≤–µ—Ç!",
  "timestamp": "2025-10-05T12:00:00Z",
  "image_data": null  # –∏–ª–∏ base64 —Å—Ç—Ä–æ–∫–∞
}

# Response:
{
  "response_text": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
  "voice_message": null,  # –∏–ª–∏ base64 audio
  "image_base64": null
}
```

#### Profile:

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
GET /profile/{user_id}

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
POST /profile
{
  "user_id": 123,
  "data": {
    "name": "–ò–≤–∞–Ω",
    "gender": "male"
  }
}

# –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
DELETE /profile/{user_id}

# –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏
GET /profile/status/{user_id}
```

#### Admin Endpoints (—Ç—Ä–µ–±—É—é—Ç JWT + admin –ø—Ä–∞–≤–∞):

```bash
# –ú–µ—Ç—Ä–∏–∫–∏ –ë–î
GET /admin/db_metrics
Authorization: Bearer <admin_token>

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
GET /admin/cache_stats

# –°—Ç–∞—Ç—É—Å scheduler
GET /admin/scheduler_status

# –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
GET /admin/analytics/overview
GET /admin/analytics/users
GET /admin/analytics/messages?days=7
GET /admin/analytics/revenue
GET /admin/analytics/features
GET /admin/analytics/cohort?days=30
GET /admin/analytics/funnel
GET /admin/analytics/activity
GET /admin/analytics/tools?days=7
```

### Swagger UI:

–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:8000/docs
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –∑–∞—â–∏—Ç—ã:

#### 1. Authentication & Authorization:
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã —Å –∫–æ—Ä–æ—Ç–∫–∏–º TTL (1 —á–∞—Å)
- ‚úÖ HMAC-SHA256 –ø–æ–¥–ø–∏—Å—å —Ç–æ–∫–µ–Ω–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–ª—ã JWT_SECRET (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
- ‚úÖ Bearer token scheme

#### 2. Data Encryption:
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (Fernet)
- ‚úÖ –•—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–º–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### 3. Rate Limiting:
```python
# –ü—Ä–∏–º–µ—Ä—ã –ª–∏–º–∏—Ç–æ–≤:
- /auth: 10/minute
- /chat: 10/minute
- /profile: 20/minute
- /admin/*: 10/minute
- /admin/cleanup_chat_history: 1/hour
```

#### 4. Input Validation:
- ‚úÖ Pydantic schemas –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Sanitization (bleach) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è XSS
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–º–∞–∫—Å 10MB)
- ‚úÖ SQL Injection –∑–∞—â–∏—Ç–∞ (SQLAlchemy ORM)

#### 5. Infrastructure Security:
- ‚úÖ Docker –∏–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ Health checks (liveness/readiness)
- ‚úÖ Graceful shutdown (SIGTERM handling)
- ‚úÖ Secrets –≤ environment variables

### Security Checklist –¥–ª—è Production:

```bash
# 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –∫–ª—é—á–µ–π
openssl rand -hex 32  # JWT_SECRET
python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"  # ENCRYPTION_KEY

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS (—á–µ—Ä–µ–∑ reverse proxy: nginx/traefik)
# 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall –ø—Ä–∞–≤–∏–ª
# 4. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ /admin/* endpoints
# 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
# 6. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –ë–î
# 7. –ê—É–¥–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (pip-audit, safety)
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ:
- [SECURITY_FIXES.md](./SECURITY_FIXES.md)
- [PRIVACY_AND_SECURITY_AUDIT.md](./PRIVACY_AND_SECURITY_AUDIT.md)
- [APPLY_SECURITY_FIXES.md](./APPLY_SECURITY_FIXES.md)

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

#### 1. **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ API:**
```bash
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ API workers
docker-compose up -d --scale api=4

# Gunicorn —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 4 worker –ø—Ä–æ—Ü–µ—Å—Å–∞
```

#### 2. **Connection Pooling:**
- PostgreSQL: asyncpg —Å –ø—É–ª–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- Redis: Connection pool (max 50 connections)

#### 3. **Caching Strategy:**
- Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- TTL: 600 —Å–µ–∫—É–Ω–¥ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- Graceful degradation –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis

#### 4. **Circuit Breaker Pattern:**
```python
# Gemini API Circuit Breaker:
- Failure Threshold: 5 –æ—à–∏–±–æ–∫
- Timeout: 60 —Å–µ–∫—É–Ω–¥
- Half-Open: 1 –ø—Ä–æ–±–Ω—ã–π –∑–∞–ø—Ä–æ—Å

# Redis Circuit Breaker:
- Failure Threshold: 3 –æ—à–∏–±–∫–∏
- Timeout: 30 —Å–µ–∫—É–Ω–¥
```

#### 5. **Database Optimization:**
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª—è—Ö (user_id, timestamp)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (scheduler)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ slow queries (>1s –ª–æ–≥–∏—Ä—É—é—Ç—Å—è)

#### 6. **Async Everywhere:**
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (asyncio)
- Non-blocking I/O –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫:

```bash
# 1. Load Balancer (nginx/HAProxy)
# 2. Read Replicas –¥–ª—è PostgreSQL
# 3. Redis Cluster –¥–ª—è –∫—ç—à–∞
# 4. CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
# 5. Message Queue (RabbitMQ/Kafka) –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
# 6. Kubernetes –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ:
- [SCALABILITY_IMPROVEMENTS.md](./SCALABILITY_IMPROVEMENTS.md)
- [CHANGELOG_SCALABILITY.md](./CHANGELOG_SCALABILITY.md)

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### Prometheus –ú–µ—Ç—Ä–∏–∫–∏:

–≠–Ω–¥–ø–æ–∏–Ω—Ç `/metrics` —ç–∫—Å–ø–æ–Ω–∏—Ä—É–µ—Ç:

```
# Custom –º–µ—Ç—Ä–∏–∫–∏:
chat_requests_total - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤
chat_requests_duration_seconds - –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
ai_response_duration_seconds - –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI –æ—Ç–≤–µ—Ç–æ–≤
tts_generation_duration_seconds - –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥–æ–ª–æ—Å–∞
voice_messages_generated_total - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP –º–µ—Ç—Ä–∏–∫–∏ (starlette-prometheus):
http_requests_total
http_request_duration_seconds
http_requests_in_progress
```

### DB Monitoring:

```bash
# –≠–Ω–¥–ø–æ–∏–Ω—Ç –º–µ—Ç—Ä–∏–∫ –ë–î
GET /admin/db_metrics

# Response:
{
  "total_queries": 1543,
  "slow_queries": 3,
  "average_query_time": "0.023s",
  "slow_query_percent": "0.19%",
  "queries": [
    {
      "query": "SELECT * FROM...",
      "duration": "1.234s",
      "timestamp": "2025-10-05 12:00:00"
    }
  ]
}
```

### Scheduler Tasks:

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (APScheduler):

1. **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π** - –µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00 UTC
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫** - –∫–∞–∂–¥—ã–π —á–∞—Å
3. **–ú–µ—Ç—Ä–∏–∫–∏ –∫—ç—à–∞** - –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
4. **–ü—Ä–æ–≥—Ä–µ–≤ –∫—ç—à–∞** - –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

```bash
# –°—Ç–∞—Ç—É—Å scheduler
GET /admin/scheduler_status

# Response:
{
  "running": true,
  "jobs": [
    {
      "id": "cleanup_messages",
      "next_run": "2025-10-06 03:00:00",
      "status": "scheduled"
    }
  ]
}
```

### Analytics Dashboard:

–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

- **Overview** - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (DAU, MAU, –ø—Ä–µ–º–∏—É–º)
- **Users** - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º –∏ –ø–æ–¥–ø–∏—Å–∫–∞–º
- **Messages** - –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **Revenue** - MRR, ARR, churn rate
- **Features** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
- **Cohort** - retention analysis
- **Funnel** - –∫–æ–Ω–≤–µ—Ä—Å–∏—è –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏
- **Activity** - –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- **Tools** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AI tools

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [ANALYTICS_GUIDE.md](./ANALYTICS_GUIDE.md)

---

## üíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:

```bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
.venv\Scripts\activate     # Windows

# 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# 3. –ó–∞–ø—É—Å–∫ PostgreSQL –∏ Redis –ª–æ–∫–∞–ª—å–Ω–æ
docker-compose up db redis -d

# 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
alembic upgrade head

# 5. –ó–∞–ø—É—Å–∫ API –ª–æ–∫–∞–ª—å–Ω–æ
uvicorn main:app --reload --port 8000

# 6. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
python -m bot
```

### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
# 1. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ server/models.py

# 2. –°–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
alembic revision --autogenerate -m "Add new column"

# 3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é
cat alembic/versions/<hash>_add_new_column.py

# 4. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é
alembic upgrade head

# 5. –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
alembic downgrade -1
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```
Malter/
‚îú‚îÄ‚îÄ alembic/                # Database migrations
‚îÇ   ‚îî‚îÄ‚îÄ versions/
‚îú‚îÄ‚îÄ bot/                    # Telegram Bot
‚îÇ   ‚îú‚îÄ‚îÄ handlers/           # Message handlers
‚îÇ   ‚îú‚îÄ‚îÄ services/           # Business logic
‚îÇ   ‚îî‚îÄ‚îÄ utils/              # Bot utilities
‚îú‚îÄ‚îÄ server/                 # FastAPI Application
‚îÇ   ‚îú‚îÄ‚îÄ ai.py               # Gemini integration
‚îÇ   ‚îú‚îÄ‚îÄ database.py         # Database operations
‚îÇ   ‚îú‚îÄ‚îÄ models.py           # SQLAlchemy models
‚îÇ   ‚îú‚îÄ‚îÄ schemas.py          # Pydantic schemas
‚îÇ   ‚îú‚îÄ‚îÄ analytics.py        # Analytics queries
‚îÇ   ‚îú‚îÄ‚îÄ scheduler.py        # Background tasks
‚îÇ   ‚îú‚îÄ‚îÄ tts.py              # Text-to-speech
‚îÇ   ‚îî‚îÄ‚îÄ relationship_config.py  # Levels config
‚îú‚îÄ‚îÄ utils/                  # Shared utilities
‚îÇ   ‚îú‚îÄ‚îÄ cache.py            # Redis caching
‚îÇ   ‚îú‚îÄ‚îÄ circuit_breaker.py  # Circuit breaker
‚îÇ   ‚îú‚îÄ‚îÄ db_monitoring.py    # DB metrics
‚îÇ   ‚îî‚îÄ‚îÄ encryption.py       # Data encryption
‚îú‚îÄ‚îÄ prompts/                # AI prompts
‚îú‚îÄ‚îÄ scripts/                # Utility scripts
‚îú‚îÄ‚îÄ main.py                 # FastAPI app entry
‚îú‚îÄ‚îÄ config.py               # Configuration
‚îú‚îÄ‚îÄ docker-compose.yml      # Docker orchestration
‚îú‚îÄ‚îÄ requirements.txt        # Python dependencies
‚îî‚îÄ‚îÄ .env.example            # Environment template
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=server --cov=bot --cov=utils

# –¢–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
pytest tests/unit/

# –¢–æ–ª—å–∫–æ integration —Ç–µ—Å—Ç—ã
pytest tests/integration/
```

### Code Style:

```bash
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
black .

# Linting
pylint server/ bot/ utils/

# Type checking
mypy server/ bot/ utils/
```

---

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. **–û—à–∏–±–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏: "Encryption module not available"**

```bash
# –ü—Ä–æ–±–ª–µ–º–∞: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–π –Ω–µ –≤–∏–¥–∏—Ç –º–æ–¥—É–ª—å utils
# –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ PYTHONPATH –≤ Dockerfile.migration

# –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
docker-compose exec migration python -c "import sys; print(sys.path)"
```

#### 2. **Redis connection refused**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ Redis
docker-compose ps redis
docker-compose logs redis

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Redis
docker-compose restart redis

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
docker-compose exec api ping redis
```

#### 3. **JWT validation failed**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ JWT_SECRET –≤ .env
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–ª–∏–Ω–∞ >= 32 —Å–∏–º–≤–æ–ª–æ–≤

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞:
openssl rand -hex 32
```

#### 4. **Gemini API errors**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Circuit Breaker —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost:8000/ready

# Response –ø–æ–∫–∞–∂–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
{
  "gemini": {
    "status": "healthy",
    "circuit_breaker": {
      "state": "CLOSED",
      "failure_count": 0
    }
  }
}

# –ï—Å–ª–∏ "state": "OPEN" - –ø–æ–¥–æ–∂–¥–∏—Ç–µ 60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∞–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
```

#### 5. **Slow database queries**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
curl http://localhost:8000/admin/db_metrics

# –ï—Å–ª–∏ –º–Ω–æ–≥–æ slow queries:
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã
# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∫—É —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
POST http://localhost:8000/admin/cleanup_chat_history
```

#### 6. **Bot –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –±–æ—Ç–∞
docker-compose logs -f bot

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ API
curl http://localhost:8000/health

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
echo $TELEGRAM_BOT_TOKEN

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
docker-compose restart bot
```

### –õ–æ–≥–∏ –∏ –¥–µ–±–∞–≥:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ª–æ–≥–æ–≤
docker-compose logs -f

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
docker-compose logs --tail=100 | grep ERROR

# –§–∏–ª—å—Ç—Ä –ø–æ —Å–µ—Ä–≤–∏—Å—É
docker-compose logs -f api bot

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤ —Ñ–∞–π–ª
docker-compose logs > logs_$(date +%Y%m%d_%H%M%S).txt
```

### Performance Profiling:

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ú–µ—Ç—Ä–∏–∫–∏ API
curl http://localhost:8000/metrics | grep http_request_duration

# DB –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:8000/admin/db_metrics

# Cache stats
curl http://localhost:8000/admin/cache_stats
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞:

- [SECURITY_FIXES.md](./SECURITY_FIXES.md) - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [SCALABILITY_IMPROVEMENTS.md](./SCALABILITY_IMPROVEMENTS.md) - —É–ª—É—á—à–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
- [ANALYTICS_GUIDE.md](./ANALYTICS_GUIDE.md) - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ
- [BACKUP_STRATEGY.md](./BACKUP_STRATEGY.md) - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- [PRIVACY_AND_SECURITY_AUDIT.md](./PRIVACY_AND_SECURITY_AUDIT.md) - –∞—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [improvement_plan.md](./improvement_plan.md) - –ø–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π

### Changelogs:

- [CHANGELOG_SCALABILITY.md](./CHANGELOG_SCALABILITY.md) - –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
- [SECURITY_IMPROVEMENTS_SUMMARY.md](./SECURITY_IMPROVEMENTS_SUMMARY.md) - —Å–≤–æ–¥–∫–∞ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`)
4. Push –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

### –ü—Ä–∞–≤–∏–ª–∞:

- –°–ª–µ–¥—É–π—Ç–µ PEP 8 —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
- –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ conventional commits

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

Distributed under the MIT License. See `LICENSE` for more information.

---

## üë• –ê–≤—Ç–æ—Ä—ã

- **Alex** - *Initial work*

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [Google Gemini](https://ai.google.dev/) - AI –º–æ–¥–µ–ª—å
- [FastAPI](https://fastapi.tiangolo.com/) - web framework
- [aiogram](https://docs.aiogram.dev/) - Telegram bot framework
- [SQLAlchemy](https://www.sqlalchemy.org/) - ORM

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

Telegram Bot: [@AlterMaria_bot](https://t.me/AlterMaria_bot)

Project Link: [https://github.com/yourusername/evolveai](https://github.com/yourusername/evolveai)

---

<div align="center">
  <strong>–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –∏—Å–ø–æ–ª—å–∑—É—è Python –∏ Google Gemini AI</strong>
</div>
